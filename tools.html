<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>工具台（综合） | 一起磕盐</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&family=Outfit:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="bg-orb orb-a"></div>
    <div class="bg-orb orb-b"></div>

    <header class="site-header">
      <a class="brand" href="index.html">
        <span class="brand-mark">盐</span>
        <span>
          <strong>一起磕盐</strong>
          <small>Bio Research Planner</small>
        </span>
      </a>
      <nav class="site-nav">
        <a class="nav-link" href="index.html">首页</a>
        <a class="nav-link active" href="tools.html">工具台（综合）</a>
      </nav>
    </header>

    <main class="dashboard">
      <section id="todo" class="card full-span">
        <div class="card-head">
          <h2>Todo List</h2>
          <span class="badge">日历任务 + 倒数</span>
        </div>

        <div class="todo-planner">
          <div class="calendar-panel">
            <div class="calendar-head">
              <button type="button" id="todo-prev-month">上个月</button>
              <strong id="todo-month-label"></strong>
              <button type="button" id="todo-next-month">下个月</button>
            </div>
            <div class="week-header">
              <span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span>六</span><span>日</span>
            </div>
            <div id="todo-calendar" class="calendar-grid"></div>
          </div>

          <aside id="plan-panel" class="plan-panel plan-month">
            <div class="plan-head">
              <h3 id="plan-title">月计划</h3>
              <button type="button" id="plan-back" class="ghost" hidden>返回月计划</button>
            </div>
            <form id="plan-form" class="inline-form">
              <input id="plan-input" type="text" placeholder="添加计划任务" required />
              <button type="submit">添加</button>
            </form>
            <ul id="plan-list" class="todo-list"></ul>
          </aside>
        </div>

        <div class="result-block">
          <h3>时间节点倒数</h3>
          <form id="countdown-form" class="grid-2">
            <input id="countdown-name" type="text" placeholder="节点名称（如：基金截止）" required />
            <input id="countdown-time" type="datetime-local" required />
            <button type="submit">添加节点</button>
          </form>
          <div id="countdown-list" class="history-list"></div>
        </div>
      </section>

      <section id="almanac" class="card todo-card">
        <div class="card-head">
          <h2>黄历投稿建议</h2>
          <span class="badge">API + 本地回退</span>
        </div>
        <form id="almanac-config" class="grid-2 compact-grid">
          <select id="almanac-source">
            <option value="local">本地算法（默认）</option>
            <option value="api">外部 API（需配置）</option>
          </select>
          <input id="almanac-api-url" type="url" placeholder="API URL，例如：https://example.com/almanac" />
          <input id="almanac-api-key" type="text" placeholder="API Key（可选）" />
          <button type="button" id="almanac-refresh">刷新今日建议</button>
        </form>
        <div id="almanac-panel" class="almanac-panel">
          <p class="muted">正在计算今日信息...</p>
        </div>
      </section>

      <section id="protocol" class="card almanac-card">
        <div class="card-head">
          <h2>Protocol 检索</h2>
          <span class="badge">常规实验流程</span>
        </div>
        <form id="protocol-search" class="inline-form">
          <input id="protocol-keyword" type="text" placeholder="搜索关键词：PCR / Western / IF" />
          <button type="submit">检索</button>
        </form>
        <div id="protocol-results" class="link-list"></div>
      </section>

      <section id="dose" class="card dose-card">
        <div class="card-head">
          <h2>剂量计算器</h2>
          <span class="badge">单位换算 + Buffer 配比</span>
        </div>
        <div class="tabs">
          <button class="tab-btn active" data-tab="convert">单位换算</button>
          <button class="tab-btn" data-tab="buffer">Buffer 配比</button>
        </div>

        <div id="tab-convert" class="tab-content active">
          <div class="grid-2">
            <input id="convert-value" type="number" placeholder="输入数值" value="1" />
            <select id="convert-category">
              <option value="mass">质量 (g/mg/ug/ng)</option>
              <option value="volume">体积 (L/mL/uL)</option>
              <option value="molar">浓度 (M/mM/uM/nM)</option>
            </select>
            <select id="convert-from"></select>
            <select id="convert-to"></select>
          </div>
          <button id="convert-btn" class="primary">计算</button>
          <p id="convert-output" class="result"></p>
        </div>

        <div id="tab-buffer" class="tab-content">
          <form id="buffer-form">
            <div class="grid-2">
              <input id="buffer-volume" type="number" min="1" placeholder="最终体积 (mL)" value="100" />
              <input id="buffer-name" type="text" placeholder="Buffer 名称，例如：TBST" />
            </div>
            <div id="solutes"></div>
            <button type="button" id="add-solute" class="ghost">+ 添加溶质</button>
            <button type="submit" class="primary">生成配比</button>
          </form>
          <div id="buffer-output" class="result-block"></div>
          <div class="result-block">
            <h3>最近配比记录</h3>
            <div id="buffer-history" class="history-list"></div>
          </div>
        </div>
      </section>

      <section id="literature" class="card full-span">
        <div class="card-head">
          <h2>文献检索入口聚合</h2>
          <span class="badge">PubMed / Scholar / bioRxiv</span>
        </div>
        <form id="literature-form" class="inline-form">
          <input id="literature-keyword" type="text" placeholder="输入关键词后可一键跳转检索" />
          <button type="submit">按关键词检索</button>
        </form>
        <div id="literature-links" class="link-grid"></div>
      </section>
    </main>

    <script src="app.js"></script>
  </body>
</html>
